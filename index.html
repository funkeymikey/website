<!DOCTYPE html>

<html ng-app="resumeApp" ng-controller="resumeController" >
	<head>
		<title ng-bind="resumeData.name"></title>
		<link rel="stylesheet" type="text/css" href="styles/stylesheet.css">
	</head>
	<body ng-cloak>
		
		<div>
			<div class="column">
				<img ng-if="resumeData.image" ng-src="{{resumeData.image}}" alt="{{resumeData.name}}" class="photo"/>	
			</div>
			<div class="column">
				<h1>{{resumeData.name}}</h1>
				<div>{{resumeData.tagline}}</div>
			</div>
		</div>
		<div class="clear"></div>

		<section id="bio" ng-if="resumeData.bio">
			<h2>Bio</h2>
			<p>{{resumeData.bio}}</p>
		</section>

		<section id="contactInfo" ng-if="resumeData.contactInfo">
			<h2>Contact Info</h2>
			<p>
				{{resumeData.contactInfo.email}}<br />
				{{resumeData.contactInfo.phone}}<br />
				{{resumeData.contactInfo.address.number}} {{resumeData.contactInfo.address.street}}<br />
				{{resumeData.contactInfo.address.city}}, {{resumeData.contactInfo.address.state}} {{resumeData.contactInfo.address.postal}}<br />
			</p>
		</section>

		<section id="skills" ng-if="isPopulated(resumeData.skills)">
			<h2>Skills</h2>
			<div ng-repeat="skill in resumeData.skills">
				<h3>{{skill.category}}</h3>
				<div ng-repeat="rating in skill.ratings">
					<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="rating column" viewbox="0 0 150 150">
						<path ng-attr-d="{{getArcPathData(rating.percent)}}"></path>
						<text xmlns="http://www.w3.org/2000/svg" x="40" y="75" font-size="40" class="rating-skill">{{rating.skill}}</text>
						<text xmlns="http://www.w3.org/2000/svg" x="50" y="110" font-size="20" class="rating-percent">{{rating.percent}}%</text>						
					</svg>
				</div>
				<div class="clear"></div>
			</div>
		</section>

		<section id="workHistory" ng-if="isPopulated(resumeData.workHistory)">
			<h2>Work History</h2>
			<div class="clear"></div>
			<div ng-repeat="job in resumeData.workHistory" ng-init="jobIndex = $index" class="job column">
				<div ng-if="job.employerLogo" class="employer-logo">
					<img ng-src="{{job.employerLogo}}" alt="{{job.employerName}} logo" />
				</div>
				<h2><a ng-href="{{job.employerWebsite}}">{{job.employerName}}</a></h2>
				<div ng-if="job.employerTagline">{{job.employerTagline}}</div>
				{{job.startDate | date:'MMMM yyyy'}} &mdash; <span ng-if="job.endDate">{{job.endDate | date:'MMMM yyyy'}}</span><span ng-if="!job.endDate">Present</span>
				<ul ng-repeat="position in job.positions" ng-init="positionIndex = $index">
					<li>
					<h3>{{position.role}}</h3>
						({{position.startDate | date:'MM/yyyy'}} to <span ng-if="job.endDate">{{position.endDate | date:'MM/yyyy'}}</span><span ng-if="!job.endDate">Present</span>)
					
					<div ng-if="shouldShow(jobIndex)">
						{{position.team}}
					</div>

					<div ng-if="isPopulated(position.recognitions)">
						Recognitions
						<ul ng-repeat="recognition in position.recognitions">
							<li>{{recognition}}</li>
						</ul>
					</div>

					<div ng-if="shouldShow(jobIndex) && isPopulated(position.responsibilities)">
						Responsibilities
						<ul ng-repeat="responsibility in position.responsibilities">
							<li>{{responsibility}}</li>
						</ul>
					</div>
					</li>
				</ul>

				<button ng-click="toggleMore(jobIndex)">{{shouldShow(jobIndex) ? 'Show Less' : 'Show More'}}</button>
			</div>
		</section>
		<div class="clear"></div>

		<section id="hobbies" ng-if="isPopulated(resumeData.hobbies)">
			<h2>Hobbies</h2>
			{{resumeData.hobbies}}
		</section>

		<section id="education" ng-if="isPopulated(resumeData.education)">
			<h2>Education</h2>
			<ul ng-repeat="award in resumeData.education">
				<li>{{award.type}} from {{award.from}}, {{award.date | date:'MMMM yyyy'}}</li>
			</ul>
		</section>

		<script src="scripts/angular.min.js"></script>
		<script src="scripts/resume.js"></script>

	</body>
</html>